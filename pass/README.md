## 推荐玩法

**选一句你记得最深刻的一句话或者几个字，生成密码**

> 例如， 我用一句诗做密码”床前明月光”， 算出来的密码是： 342825tR&

**密码忘记了怎么办？**

>没关系，只要你**记得生成密码的那句话**， 再回来输入一遍，**重新算回来**。

**有时候你的密码需要定期更换，怎么办？**

>很简单，在生成密码的时候在你记住那句话后面（前面也可以），加上日期。
>
>输入：床前明月光202011，算出密码：575684wN^




## 设计背后的故事

有没有这样的感觉，网络时代密码越来越多，记性越来越来越差，忘记密码的时候会让人抓狂？
不是有很多工具可用了吗？
是的， 有很多管理密码的软件声称自己很安全，但你敢用吗，毕竟数据泄露的新闻并不罕。

密码我们是记不住的，那不妨先回忆一下，能记住什么吧，流行歌词，唐诗宋词，特殊纪念日，成语，名人语录等。电影《龙门飞甲》里的暗语，上句”龙门飞甲“，下句要对”便知真假“，这是我们能听懂的密码。

我们记得住的都是朗朗上口的词句， 不是AbCd!@#$，偏偏电脑系统总是傻傻的，它只认数字、字母和一些怪符号。

**有没有办法可以把记得住的“人话”，转成电脑看得懂的“机器语” ？**

用狄大人的话说， 让我想想， 好好的想一想。 一炷香的工夫之后狄公微微一笑，于是有了下面的情节。





## 一种用任意文字生成密码的方法

首先回顾一下我们经常用到的密码，依次从简单到复杂：

- 纯数字密码，一般是6位。
- 一般要求最少8位密码，包含数字+字母。
- 复杂的要求最少8位密码，包含数字+字母+特殊字符。
- 变态级除以上要求，要求数字不能连续，不能重复。

基于这个实际情况，我认为设计三种类型的密码就足够了：
| 密码等级 | 位数 | 构成                                        |
| -------- | ---- | ------------------------------------------- |
| 数字密码 | 6    | 6位数字                                     |
| 一般强度 | 9    | 依次：6位数字+1小写字母+1大写字母+1特殊字符 |
| 复杂密码 | 9    | 穿插：6位数字+1小写字母+1大写字母+1特殊字符 |

据我个人的经验，一般密码就可以满足**99%**以上的密码强度要求， 复杂密码应该可以满足**99.9%**的要求，反正我从来没用过。

### 1. 生成MD5值

首先把输入的文字转成MD5值。我们知道MD5算法是安全的，是不可逆的，除非知道原文，否则不可能进行反推。这是整个密码生成算法安全性的基石。

**生成密码的字符集**

| 类型           | 个数 | 字符表                  |
| -------------- | ---- | ----------------------- |
| 数字           | 10   | 0~9                     |
| 字母（大小写） | 23   | abcdefghijkmnpqrstuvwxy |
| 特殊           | 8    | !@#$%^&*                |

### 2. 生成6位数字。

依次从MD5中取出两位， 取出末尾数值d，加入当前数字串中。为提高安全性，要求生成串中：

- 不能含有对子，例如55， 33。显然不会有三连。
- 不能含有顺子，例如 234， 543
- 不能含有重复串，例如 7474

当发生冲突时，需要替换成其他数字， 这里采用伪随机算法来生成替代数字，以当前数字为种子计算下一随机值。伪随机算法是决定式算法，因此序列完全由种子决定。

### 3. 生成其它字符
同样的方法，取出MD5串中剩下的两位，映射到字母集中（去掉了olz不易与数字区分）。特殊字符也用同样方法生成。

### 密码强度分析

总密码空间大小（忽略一些简单数字）$10^6×23^2×8=4.23×10^9$，可以生成四亿多个不同的密码组合，要知道你的银行密码也就6位，一百万种可能而已。





